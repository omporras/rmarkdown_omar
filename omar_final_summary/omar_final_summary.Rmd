---
title: Catering for prawns, in pursuit of sustainability in the aquaculture industry
subtitle: 
author:  Omar Mendoza Porras
affiliation: CSIRO Livestock and Aquaculture # Or group/team
photo: resources/img/jpprawn.jpg

short_title: Optional short title

output: DSreport::project_summary
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(
  results = 'asis',
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  fig.align = 'center'
)

#Load libraries
library(tidyverse)
library(gapminder)
library(kableExtra)
```


# Introduction
I am an oceanographer with experience in biotechnology, mass spectrometry and aquaculture. Before Data School I did not code at all and my data crunching consisted of lots of clicking and data sorting in Excel. It was not enjoyable.


# My Project
The goal of my project(s) is to identify peptide markers derived from proteins that are expressed in different prawn tissues as a result of using different functional diets. Proteomics is used as a main tool. The long term goal is to achieve sustainability in the aquaculture sector throughout the use of diets manufactured from renewable sources.  


## Preliminary results

This section will demonstrate the different visuals you might want use to show off your 
project. Don't feel the need to go overboard, this is supposed to give a taste of the work you are
doing rather than being a publication ready document.
```{r importing raw data file followed by producing a long version of it}
ral <- read_csv("data/Ral17_3.csv")
#view(ral)
#make long format
ral_long <- ral %>% 
  gather(peptide, concentration, -replicate, -diet)
#view(ral_long)
ggplot(ral_long, aes(x=peptide, y = concentration, colour = diet)) +
  geom_point(size = 0.6)


ggplot(ral_long, aes(x=peptide, y = concentration, colour = diet)) +
  geom_point(size = 0.6) +
  scale_y_log10()
```


To get tables formatting correctly, use `knitr::kable` to convert the table to html format. If
you also want to have alternate row highlighting, pass the result to `kable_styling('striped')` 
from the `kableExtra` package.


**Tables**
```{r #sample table for html markdown. Filter by replicate 1 to display a replicate of each treatment in the html output}
Rep1<-filter(ral_long, replicate == 1)

```


```{r mytable, out.width='100%', echo = T}
knitr::kable(head(Rep1, n = 4), format = "html", caption = "Differential protein expression in hepatopancreas of black tiger prawn _Penaeus monodon_ in response to specific feeding formulations") %>% 
  kable_styling("striped")
```

**Images from a file**

![](resources/img/tidyverse.png){width=100px}


**Plots from R**
```{r standard-plot, out.width='60%', fig.align='center', fig.height= 4, fig.width=6, fig.cap="Protein expression in hepatopancreas of prawns fed different diets"}
#Obtain mean of peptide expression of each peptide sharing same accession number to represent protein expression}

#separate accession number from peptide sequence
ral_long_separated<- ral_long %>% 
  separate(peptide, into = c('pept', 'ide'))
#view(ral_long_separated)
#rename heading from table
ral_final<-rename(ral_long_separated, Diet = diet, Replicate = replicate, Peptide = pept, Accession = ide, Concentration = concentration)
#view(ral_final)
#remove trypsin and reversed derived peptides
ral_final<-subset(ral_final, Accession!="TRYP")
ral_final<-subset(ral_final, Accession!="RRtr")
#view(ral_final)

#Obtain general protein expression derived from accession numbers

ral_final_by_accession <-group_by(ral_final, Accession, Diet)
#view(ral_final_by_accession) #not doing anything
general_protein_expression<-summarise(ral_final_by_accession, mean_Concentration = mean(Concentration))
#view(general_protein_expression)
ggplot(general_protein_expression, aes(x=Accession, y = mean_Concentration, colour = Diet)) +
  geom_point () +
  scale_y_log10() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom")

# To identify protein accession add label
#ggplot(general_protein_expression, aes(x=Accession, y = mean_Concentration, label = Accession, colour = Diet)) +
  geom_label(size = 2) +
  scale_y_log10() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom")

```

Your figure and table captions are automatically numbered and can be referenced in the text
if needed: see eg. Table \@ref(tab:mytable) and Figure \@ref(fig:standard-plot)

# My Digital Toolbox

What digital tools have you been using in your project? Which ones have you learned since starting 
Data School?

You can use all the usual R markdown features in writing a project summary, including lists:

* R - dplyr, ggplot, ...
* Python
* SQL

## Favourite tool (optional)

Is there a tool/package/function in particular that you've enjoyed using? Give it a special shout out here.

![](https://raw.githubusercontent.com/tidyverse/ggplot2/master/man/figures/logo.png){.pull-right width=100px}

No prizes for guessing mine:

# My time went ...

What parts of the project took the most time and effort? Were there any surprising challenges you
encountered, and how did you solve them?

# Next steps

What further steps do you wish your project could take? Or are there any new digital skills that you
are keen to develop as a result of your involvement in the Data School?

# My Data School Experience

This poster is mostly about your synthesis project. However we would also like to hear about other
parts of your Data School experience. What aspects of the program did you really enjoy? How have you
been applying the skills you have learned in your daily work? Have you been able to transfer this 
knowledge to your team members? Concrete examples demonstrating this would be useful here
(meetings/talks/collaborations/new roles). Any descriptions of the personal impact the program has 
had are welcome here as well!
